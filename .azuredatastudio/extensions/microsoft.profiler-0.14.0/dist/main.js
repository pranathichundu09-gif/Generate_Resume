(()=>{"use strict";var e={403:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});var n,a,r,i,l,s,u=o(17),c=o(147),d=Object.prototype.toString;function g(e){return void 0!==e}function f(e){return"[object String]"===d.call(e)}function h(e){return JSON.parse(c.readFileSync(e,"utf8"))}function v(e,t){return s&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===t.length?e:e.replace(/\{(\d+)\}/g,(function(e,o){var n=o[0],a=t[n],r=e;return"string"==typeof a?r=a:"number"!=typeof a&&"boolean"!=typeof a&&null!=a||(r=String(a)),r}))}function m(e){return function(t,o){for(var n,a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];return n=t,"[object Number]"===d.call(n)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: "+new Error("").stack):v(e[t],a):f(o)?(console.warn("Message "+o+" didn't get externalized correctly."),v(o,a)):void console.error("Broken localize call found. Stacktrace is\n: "+new Error("").stack)}}function p(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];return v(t,o)}function S(e,t){return i[e]=t,t}function b(e){try{return function(e){var t=h(u.join(e,"nls.metadata.json")),o=Object.create(null);for(var n in t){var a=t[n];o[n]=a.messages}return o}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function x(e,t){var o;if(!0===l.languagePackSupport&&void 0!==l.cacheRoot&&void 0!==l.languagePackId&&void 0!==l.translationsConfigFile&&void 0!==l.translationsConfig)try{o=function(e,t){var o,n,a,r=u.join(l.cacheRoot,e.id+"-"+e.hash+".json"),i=!1,s=!1;try{return o=JSON.parse(c.readFileSync(r,{encoding:"utf8",flag:"r"})),n=r,a=new Date,c.utimes(n,a,a,(function(){})),o}catch(e){if("ENOENT"===e.code)s=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: "+e.message+"."),c.unlink(r,(function(e){e&&console.error("Deleting corrupted bundle "+r+" failed.")})),i=!0}}if(o=function(e,t){var o=l.translationsConfig[e.id];if(o){var n=h(o).contents,a=h(u.join(t,"nls.metadata.json")),r=Object.create(null);for(var i in a){var s=a[i],c=n[e.outDir+"/"+i];if(c){for(var d=[],g=0;g<s.keys.length;g++){var v=s.keys[g],m=c[f(v)?v:v.key];void 0===m&&(m=s.messages[g]),d.push(m)}r[i]=d}else r[i]=s.messages}return r}}(e,t),!o||i)return o;if(s)try{c.writeFileSync(r,JSON.stringify(o),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return o;throw e}return o}(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!o){if(l.languagePackSupport)return b(t);var n=function(e){for(var t=l.language;t;){var o=u.join(e,"nls.bundle."+t+".json");if(c.existsSync(o))return o;var n=t.lastIndexOf("-");t=n>0?t.substring(0,n):void 0}if(void 0===t&&(o=u.join(e,"nls.bundle.json"),c.existsSync(o)))return o}(t);if(n)try{return h(n)}catch(e){console.log("Loading in the box message bundle failed.",e)}o=b(t)}return o}function y(e){if(!e)return p;var t=u.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),l.messageFormat===n.both||l.messageFormat===n.bundle){var o=function(e){for(var t,o=u.dirname(e);t=u.join(o,"nls.metadata.header.json"),!c.existsSync(t);){var n=u.dirname(o);if(n===o){t=void 0;break}o=n}return t}(e);if(o){var a=u.dirname(o),r=i[a];if(void 0===r)try{var d=JSON.parse(c.readFileSync(o,"utf8"));try{var f=x(d,a);r=S(a,f?{header:d,nlsBundle:f}:null)}catch(e){console.error("Failed to load nls bundle",e),r=S(a,null)}}catch(e){console.error("Failed to read header file",e),r=S(a,null)}if(r){var v=e.substr(a.length+1).replace(/\\/g,"/"),b=r.nlsBundle[v];return void 0===b?(console.error("Messages for file "+e+" not found. See console for details."),function(){return"Messages not found."}):m(b)}}}if(l.messageFormat===n.both||l.messageFormat===n.file)try{var y=h(function(e){var t;if(l.cacheLanguageResolution&&t);else{if(s||!l.language)t=".nls.json";else for(var o=l.language;o;){var n=".nls."+o+".json";if(c.existsSync(e+n)){t=n;break}var a=o.lastIndexOf("-");a>0?o=o.substring(0,a):(t=".nls.json",o=null)}l.cacheLanguageResolution}return e+t}(e));return Array.isArray(y)?m(y):g(y.messages)&&g(y.keys)?m(y.messages):(console.error("String bundle '"+e+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file "+e),function(){return"Failed to load message bundle. See console for details."}}!function(e){e.file="file",e.bundle="bundle",e.both="both"}(n=t.MessageFormat||(t.MessageFormat={})),function(e){e.standalone="standalone",e.languagePack="languagePack"}(a=t.BundleFormat||(t.BundleFormat={})),function(e){e.is=function(e){var t=e;return t&&g(t.key)&&g(t.comment)}}(r||(r={})),function(){if(l={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:n.bundle},f(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),t=void 0;if(e.availableLanguages){var o=e.availableLanguages["*"];f(o)&&(t=o)}if(f(e.locale)&&(l.locale=e.locale.toLowerCase()),void 0===t?l.language=l.locale:"en"!==t&&(l.language=t),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(l.languagePackSupport=e._languagePackSupport),f(e._cacheRoot)&&(l.cacheRoot=e._cacheRoot),f(e._languagePackId)&&(l.languagePackId=e._languagePackId),f(e._translationsConfigFile)){l.translationsConfigFile=e._translationsConfigFile;try{l.translationsConfig=h(l.translationsConfigFile)}catch(t){if(e._corruptedFile){var a=u.dirname(e._corruptedFile);c.exists(a,(function(t){t&&c.writeFile(e._corruptedFile,"corrupted","utf8",(function(e){console.error(e)}))}))}}}}catch(e){}s="pseudo"===l.locale,i=Object.create(null)}(),t.loadMessageBundle=y,t.config=function(e){return e&&(f(e.locale)&&(l.locale=e.locale.toLowerCase(),l.language=l.locale,i=Object.create(null)),void 0!==e.messageFormat&&(l.messageFormat=e.messageFormat),e.bundleFormat===a.standalone&&!0===l.languagePackSupport&&(l.languagePackSupport=!1)),s="pseudo"===l.locale,y}},169:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateSessionData=void 0,t.CreateSessionData=class{constructor(e,t){this.templates=new Array,this.ownerUri=e,this.templates=t}getTemplateNames(){return this.templates.map((e=>e.name))}selectTemplate(e){return this.templates.find((t=>t.name===e))}}},946:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,r){function i(e){try{s(n.next(e))}catch(e){r(e)}}function l(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,l)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateSessionDialog=void 0;const a=o(403),r=o(72),i=o(496),l=o(169),s=a.loadMessageBundle(o(17).join(__dirname,"dialogs/profilerCreateSessionDialog.ts"));t.CreateSessionDialog=class{constructor(e,t,o){if(this.CancelButtonText=s(0,null),this.CreateButtonText=s(1,null),this.DialogTitleText=s(2,null),this._onSuccess=new i.EventEmitter,this.onSuccess=this._onSuccess.event,null==o)throw new Error(s(3,null));if(null==e)throw new Error(s(4,null));if(null==t)throw new Error(s(5,null));this._providerType=t,this.model=new l.CreateSessionData(e,o)}showDialog(){return n(this,void 0,void 0,(function*(){this.dialog=r.window.createModelViewDialog(this.DialogTitleText),this.initializeContent(),this.dialog.okButton.onClick((()=>this.execute())),this.dialog.cancelButton.onClick((()=>{})),this.dialog.okButton.label=this.CreateButtonText,this.dialog.cancelButton.label=this.CancelButtonText,r.window.openDialog(this.dialog)}))}initializeContent(){this.dialog.registerContent((e=>n(this,void 0,void 0,(function*(){this.templatesBox=e.modelBuilder.dropDown().withProps({values:[]}).component(),this.sessionNameBox=e.modelBuilder.inputBox().withProps({required:!0,multiline:!1,value:""}).component(),this.templatesBox.onValueChanged((()=>{this.updateSessionName()}));let t=e.modelBuilder.formContainer().withFormItems([{components:[{component:this.templatesBox,title:s(6,null)},{component:this.sessionNameBox,title:s(7,null)}],title:""}]).withLayout({width:"100%"}).component();yield e.initializeModel(t),this.model.templates&&(this.templatesBox.values=this.model.getTemplateNames(),this.updateSessionName()),this.sessionNameBox.onTextChanged((()=>{this.sessionNameBox.value.length>0?(this.model.sessionName=this.sessionNameBox.value,this.dialog.okButton.enabled=!0):this.dialog.okButton.enabled=!1}))}))))}updateSessionName(){this.templatesBox.value&&(this.sessionNameBox.value=`ADS_${this.templatesBox.value.toString()}`)}execute(){return n(this,void 0,void 0,(function*(){let e=r.dataprotocol.getProvider(this._providerType,r.DataProviderType.ProfilerProvider),t=(this.sessionNameBox.value,this.templatesBox.value.toString()),o=this.model.selectTemplate(t);e.createSession(this.model.ownerUri,this.sessionNameBox.value,o).then((()=>{}),(e=>{const t=e&&e.message?e.message:s(8,null);i.window.showErrorMessage(t)}))}))}}},618:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=t.controller=void 0;const n=o(234);t.activate=function(e){t.controller=new n.MainController(e),t.controller.activate()},t.deactivate=function(){t.controller&&t.controller.deactivate()}},234:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MainController=void 0;const n=o(496),a=o(946);t.MainController=class{constructor(e){this._context=e}deactivate(){}activate(){n.commands.registerCommand("profiler.openCreateSessionDialog",((e,t,o)=>{new a.CreateSessionDialog(e,t,o).showDialog()}))}}},72:e=>{e.exports=require("azdata")},496:e=>{e.exports=require("vscode")},147:e=>{e.exports=require("fs")},17:e=>{e.exports=require("path")}},t={},o=function o(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,o),r.exports}(618),n=exports;for(var a in o)n[a]=o[a];o.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();
//# sourceMappingURL=https://sqlopsbuilds.blob.core.windows.net/sourcemaps/df4847b5172181ebcb32a54fe2017b92b12016ce/extensions/profiler/dist/main.js.map